<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Branch Details</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="css/style.css" />
    <script src="https://d3js.org/d3.v7.min.js"></script>

    <style>
        .tooltip {
            position: absolute;
            background: white;
            border: 1px solid #ccc;
            padding: 8px;
            border-radius: 4px;
            font-size: 13px;
            pointer-events: none;
            opacity: 0;
        }

        .chart-wrapper {
            background: #fff;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
        }
    </style>
</head>

<body>
    <header class="position-relative py-4 bg-light shadow-sm mb-4 text-center">
        <button class="btn btn-secondary btn-sm position-absolute start-0 top-50 translate-middle-y ms-3"
            onclick="window.history.back()">
            ← Back
        </button>
        <h1 class="display-6" id="title"></h1>
        <p>Explore trends in branch visits and new library card registrations over time.</p>
    </header>

    <main class="container">
        <section class="row intro mb-4 align-items-center">
            <div class="col-md-9">
                <div class="story-card p-3 mb-3">
                    <p class="lead mb-2">
                        Explore visits and new library card registrations at
                        <strong style="font-weight: bold;" id="branch-name"></strong> from 2012 to 2023.
                        - Use the left chart to explore the number of people that visited the branch each year and
                        the right chart to see the number of new library cards the branch issued each year.
                    </p>
                    <p id="correlation-text" class="lead mb-2"></p>
                    <p id="totals-text" class="lead mb-2"></p>
                </div>
            </div>

            <div class="col-md-3">
                <div class="info-box">
                    <p>
                        Dataset sources: <br />
                        <a href="https://open.toronto.ca/dataset/library-card-registrations/">Library Card Registrations</a> <br /> 
                        <a href="https://open.toronto.ca/dataset/library-visits/">Library Visits</a>.<br />
                        Visualization created with D3.js (with code development assisted by ChatGPT).
                    </p>
                </div>
            </div>
        </section>
    </main>

    <div class="row g-4">
        <div class="col-md-6">
            <div class="chart-wrapper">
                <h4 class="text-center mb-3">Branch Visits Over Time (2012–2023)</h4>
                <div id="chart-visits"></div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="chart-wrapper">
                <h4 class="text-center mb-3">New Library Card Registrations Over Time (2012–2023)</h4>
                <div id="chart-registrations"></div>
            </div>
        </div>
    </div>

    <div class="tooltip" id="scatter-tooltip"></div>
    <script src="js/branch.js"></script>
    <script src="js/postallookup.js"></script>
</body>

</html>
